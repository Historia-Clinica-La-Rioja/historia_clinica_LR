<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:fragment="headerfiles">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Reporte Imagenes</title>
    <th:block th:include="fragments/bootstrap-css.html :: style-inline"></th:block>
    <style>
        .page-header {
            top: 0;
            width: 100%;
        }
        .page-footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            font-size: 10px;
        }
        table {
            width: 76%;
            -fs-table-paginate: paginate;
            border-collapse: collapse;
        }
        .wide_wrapped_text {
            word-wrap: break-word;
            text-align: justify;
            text-justify: inter-word;
            white-space: pre-wrap;
            font-size: 13.21px;
        }
        @page {
            margin: 5mm;
        }
        hr {
            border: 0;
            height: 1px;
            background: #333;
        }
        .row-content {
            float: left;
            margin-right: 30px;
        }
        .data-text {
            font-weight: 400;
            font-size: 13.21px;
        }
        .data-text-title {
            font-weight: 400;
            font-size: 13.21px;
            margin-right: 7px;
        }
        .section-title {
            font-weight: 700;
            font-size: 13.21px;
            padding-bottom: 5px;
        }
        .data-title {
            font-weight: 700;
            font-size: 10.57px;
            margin-bottom: 5px;
        }
        @media print {
            thead {
                display: table-header-group;
            }
            tfoot {
                display: table-footer-group;
            }
            body,
            html {
                margin: 0;
                padding: 0;
            }
        }
        .section-title {
            display: flex;
            width: 100%;
            justify-content: space-between;
            flex-direction: row;
            padding-bottom: 5px;
        }
        .section-title_row {
            display: flex;
            width: 50%;
            justify-content: space-between;
            flex-direction: column;
            padding-bottom: 5px;
        }
        .sign-professional {
            display: flex;
            flex-direction: column;
            margin-left: 60%;
            margin-top: 3%;
        }
        .header-layout {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .logo {
            height: 80px;
            margin-right: 15%;
            margin-top: 1%;
        }
        .row-line {
            display: flex;
            flex-direction: row;
        }
        .comma-list {
            display: flex;
            list-style: none;
            padding: 0px;
        }
        .comma-list div::after {
            content: ", ";
        }
        .comma-list div:last-child::after {
            content: "";
        }
        .comma-list-column {
            display: inline;
            list-style: none;
            padding: 0px;
        }
        .comma-list-column div::after {
            content: ", ";
        }
        .comma-list-column div:last-child::after {
            content: "";
        }
        body {
            font-family: 'Roboto', sans-serif;
        }
        .evolution-note{
            width: 100%;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
<div th:fragment="header">
    <div class="header-layout">
        <div class="section-title_row">
            <h2 style="width: 50%; float:left;" th:text="${institutionHeader.name}"></h2>
            <div class="data-text">DIRECCION</div>
            <div>
                <div class="data-text" th:text="${institutionHeader.phone}"></div>
                <div class="data-text" th:text="${institutionHeader.email}"></div>
            </div>
        </div>
        <!-- <img style="height: 40px; float: right;" th:src="@{classpath:static/images/logoHsi.png}" alt="Logo"></img> -->
        <img class="logo" src="./static/images/logoHsi.png" alt="Logo"></img>
    </div>
    <div class="section-title">
        <h2 style="width: 100%; float:left;">Informe de Im√°genes</h2>
    </div>
</div>
<div th:fragment="patientData">
    <div>
        <div>
            <div class="row-content">
                <div class="data-title">Fecha :</div>
                <div class="data-text" th:text="${#temporals.format(performedDate, 'dd-MM-yyyy HH:mm')}"></div>
            </div>
            <div class="row-content">
                <div class="data-title">Estudios :</div>
                <div  class="comma-list" th:each="diagnosticReport,iter: ${diagnosticReportList}">
                    <div>
                        <div class="data-text" th:text="${diagnosticReport.snomed.pt}"></div>
                    </div>
                </div>
            </div>
        </div>
        <div style="clear: both;padding-top: 1px">
            <hr />
        </div>
        <div class="section-title">Datos del paciente</div>
        <div>
            <div class="row-content">
                <div class="data-title">Nombre y apellido</div>
                <div class="data-text" th:if="${!selfPerceivedFF || patient.person.nameSelfDetermination == null || patient.person.nameSelfDetermination == '' }">
                    <label th:text="${patient.person.firstName + (patient.person.middleNames != null ? ' ' + patient.person.middleNames : '') }"></label>
                    <label th:text="${patient.person.lastName + (patient.person.otherLastNames != null ? ' ' + patient.person.otherLastNames : '') }"></label>
                </div>
                <div class="data-text" th:if="${selfPerceivedFF && patient.person.nameSelfDetermination != null && patient.person.nameSelfDetermination != ''}">
                    <label th:text="${patient.person.nameSelfDetermination}"></label>
                    <label th:text="${patient.person.lastName + (patient.person.otherLastNames != null ? ' ' + patient.person.otherLastNames : '') }"></label>
                </div>
            </div>
            <div class="row-content">
                <div class="data-title">Documento</div>
                <div class="data-text" th:text="${patient.person.identificationType + patient.person.identificationNumber}"></div>
            </div>
            <div class="row-content">
                <div class="data-title">Edad</div>
                <div class="data-text" th:text="${patient.person.age}"></div>
            </div>
            <div class="row-content">
                <div class="data-title">Fecha nac.</div>
                <div class="data-text" th:text="${#temporals.format(patient.person.birthDate, 'dd/MM/yyyy')}"></div>
            </div>
        </div>
        <div style="clear: both;padding-top: 1px">
            <hr />
        </div>
    </div>
</div>
<div th:fragment="professionalData">
    <div class="section-title"> Profesional solicitante </div>
    <div>
        <div class="row-content">
            <div class="data-title">Nombre y apellido</div>
            <div class="data-text" th:if="${!selfPerceivedFF || author.nameSelfDetermination == null || author.nameSelfDetermination == '' }" >
                <label th:text="${author.firstName}"></label>
                <label th:text="${author.lastName + (author.otherLastNames != null ? ' ' + author.otherLastNames : '') }"></label>
            </div>
            <div class="data-text" th:if="${selfPerceivedFF && author.nameSelfDetermination != null && author.nameSelfDetermination != ''}">
                <label th:text="${author.nameSelfDetermination}"></label>
                <label th:text="${author.lastName + (author.otherLastNames != null ? ' ' + author.otherLastNames : '') }"></label>
            </div>
        </div>
        <div class="row-content">
            <div class="data-title">Especialidad</div>
            <div class="data-text" th:each="profession,iter: ${author.professions}">
                <div  class="comma-list" th:each="specialty,iter: ${profession.specialties}">
                    <div>
                        <div class="data-text" th:text="${specialty.specialty.name}"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row-content">
            <div class="data-title">MN</div>
            <!--<div th:if="${ getMn() != null}" class="data-text" th:text="${getMn()}"> - </div>
            <div th:if="${ getMn() == null}" class=" data-text" th:text="${' - '}"></div>-->
        </div>
        <div class="row-content">
            <div class="data-title">MP</div>
            <!--<div th:if="${ getMp != null}" class="data-text" th:text="${getMp()}">09082233</div>
            <div th:if="${ getMp == null}" class="data-text" th:text="${' - '}"></div>-->
        </div>
    </div>
    <div style="clear: both;padding-top: 1px">
        <hr />
    </div>
</div>
<div th:fragment="DetailData">
    <div>
        <div class="section-title"> Detalles del informe </div>
        <div class="evolution-note" th:utext="${evolutionNote}"></div>
        <div style="clear: both;padding-top: 1px">
            <hr />
        </div>
    </div>
</div>
<div th:fragment="conclusionsData">
    <div th:fragment="conclusions">
        <div th:if="${not #lists.isEmpty(conclusions)}">
            <h3>Conclusiones</h3>
            <dl th:each="conclusion,iter: ${conclusions}">
                <dd><p  th:text="${'- ' + conclusion.snomed.pt}"></p></dd>
            </dl>
        </div>
    </div>
    <br />
    <div>
        <span class="section-title">Atte.</span>
        <br />
        <br />
        <br />
    </div>
    <div>
        <div class="sign-professional">
            <div class="data-text" th:if="${!selfPerceivedFF || author.nameSelfDetermination == null || author.nameSelfDetermination == '' }" >
                <label th:text="${author.firstName}"></label>
                <label th:text="${author.lastName + (author.otherLastNames != null ? ' ' + author.otherLastNames : '') }"></label>
            </div>
            <div class="data-text" th:if="${selfPerceivedFF && author.nameSelfDetermination != null && author.nameSelfDetermination != ''}">
                <label th:text="${author.nameSelfDetermination}"></label>
                <label th:text="${author.lastName + (author.otherLastNames != null ? ' ' + author.otherLastNames : '') }"></label>
            </div>
            <div th:each="profession,iter: ${author.professions}">
                <div  class="comma-list-column" th:each="specialty,iter: ${profession.specialties}">
                    <div>
                        <div class="data-text" th:text="${specialty.specialty.name}"></div>
                    </div>
                </div>
            </div>

            <div th:if="${not #lists.isEmpty(author.professions)}">
                <div th:each="profession,iter: ${author.professions}">
                    <div th:if="${not #lists.isEmpty(profession.licenses)}">
                        <div th:each="license,iter: ${profession.licenses}">
                            <div class="row-line" th:if="${#strings.equals(license.type, 'MN')}">
                                <span class="data-text">M.N </span>
                                <div class="data-text" th:text="${license.number}"></div>
                            </div>
                        </div>
                    </div>
                    <div th:if="${not #lists.isEmpty(profession.specialties)}">
                        <div th:each="specialty,iter: ${profession.specialties}">
                            <div th:each="license,iter: ${specialty.licenses}">
                                <div class="row-line" th:if="${#strings.equals(license.type, 'MN')}">
                                    <span class="data-text" >M.N</span>
                                    <div class="data-text" th:text="${license.number}"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div th:if="${not #lists.isEmpty(author.professions)}">
                <div th:each="profession,iter: ${author.professions}">
                    <div th:if="${not #lists.isEmpty(profession.licenses)}">
                        <div th:each="license,iter: ${profession.licenses}">
                            <div class="row-line" th:if="${#strings.equals(license.type, 'MP')}">
                                <span class="data-text">M.P </span>
                                <div class="data-text" th:text="${license.number}"></div>
                            </div>
                        </div>
                    </div>
                    <div th:if="${not #lists.isEmpty(profession.specialties)}">
                        <div th:each="specialty,iter: ${profession.specialties}">
                            <div th:each="license,iter: ${specialty.licenses}">
                                <div class="row-line" th:if="${#strings.equals(license.type, 'MP')}">
                                    <span class="data-text" >M.P</span>
                                    <div class="data-text" th:text="${license.number}"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div th:if="${author.professions == null || }">
                <div class="data-text" th:text="${' - '}">M.P 100707</div>
            </div>
            <div th:if="${ getMp != null}">
                <div class="row-line">
                    <div class="data-text-title" th:text="${M.P}">M.P</div>
                    <div class="comma-list" th:each="mp,iter: ${getMp}">
                        <div class="data-text" th:text="${getMp()}">09082233</div>
                    </div>
                </div>
            </div>
            <div th:if="${ getMn == null}">
                <div class="data-text" th:text="${' - '}">M.P 100707</div>
            </div>
            <div th:if="${ getMn != null}">
                <div class="row-line">
                    <div class="data-text-title" th:text="${M.N}">M.N</div>
                    <div class="comma-list" th:each="mn,iter: ${getMn}">
                        <div class="data-text" th:text="${getMn()}">09082233</div>
                    </div>
                </div>
            </div> -->
            <!--<div class="row-line">
                <div class="data-text-title" th:text="${getMp()}">M.P</div>
                <div class="comma-list">
                    <div class="data-text">09082233</div>
                    <div class="data-text">09082244</div>
                </div>
            </div>
            <div class="data-text" th:text="${getMn()}">M.N 100707</div>-->
        </div>
        <br />
        <br />
        <br />
    </div>
</div>
</body>
</html>
