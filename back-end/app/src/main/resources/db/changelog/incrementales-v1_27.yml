databaseChangeLog: 
    - logicalFilePath: incrementales-v1_27 

    - changeSet:
        id: care_line-createTable
        comment: Create table care_line
        author: bchacon
        changes:
            - createTable:
                tableName: care_line
                columns:
                    - column:
                        autoIncrement: true
                        constraints:
                            primaryKey: true
                            primaryKeyName: PK_care_line
                        name: id
                        type: int
                    - column:
                        name: description
                        type: varchar(255)
                    - column:
                        name: consultation
                        type: boolean
                        defaultValue: ${boolean.false}
                    - column:
                        name: procedure
                        type: boolean
                        defaultValue: ${boolean.false}
                    - column:
                        constraints:
                            nullable: false
                        name: created_by
                        type: int
                        defaultValue: -1
                    - column:
                        constraints:
                            nullable: false
                        name: created_on
                        type: datetime
                        defaultValueDate: ${date.now}
                    - column:
                        constraints:
                            nullable: false
                        name: updated_by
                        type: int
                        defaultValue: -1
                    - column:
                        constraints:
                            nullable: false
                        name: updated_on
                        type: datetime
                        defaultValueDate: ${date.now}
                    - column:
                        constraints:
                            nullable: false
                        name: deleted
                        type: BOOLEAN
                        defaultValue: ${boolean.false}
                    - column:
                        name: deleted_by
                        type: int
                    - column:
                        name: deleted_on
                        type: datetime
                
    - changeSet:
        id: care_line_clinical_specialty-createTable
        comment: Create table care_line_clinical_specialty
        author: bchacon
        changes:
            - createTable:
                tableName: care_line_clinical_specialty
                columns:
                    - column:
                        autoIncrement: true
                        constraints:
                            primaryKey: true
                            primaryKeyName: PK_care_line_clinical_specialty
                        name: id
                        type: int
                    - column:
                        name: care_line_id
                        type: int
                    - column:
                        name: clinical_specialty_id
                        type: int
                    - column:
                        constraints:
                            nullable: false
                        name: created_by
                        type: int
                        defaultValue: -1
                    - column:
                        constraints:
                            nullable: false
                        name: created_on
                        type: datetime
                        defaultValueDate: ${date.now}
                    - column:
                        constraints:
                            nullable: false
                        name: updated_by
                        type: int
                        defaultValue: -1
                    - column:
                        constraints:
                            nullable: false
                        name: updated_on
                        type: datetime
                        defaultValueDate: ${date.now}
                    - column:
                        constraints:
                            nullable: false
                        name: deleted
                        type: BOOLEAN
                        defaultValue: ${boolean.false}
                    - column:
                        name: deleted_by
                        type: int
                    - column:
                        name: deleted_on
                        type: datetime
            - addForeignKeyConstraint:
                baseColumnNames: clinical_specialty_id
                baseTableName: care_line_clinical_specialty
                constraintName: FK_care_line_clinical_specialty_clinical_specialty
                onDelete: NO ACTION
                onUpdate: NO ACTION
                referencedColumnNames: id
                referencedTableName: clinical_specialty
                validate: true
            - addForeignKeyConstraint:
                baseColumnNames: care_line_id
                baseTableName: care_line_clinical_specialty
                constraintName: FK_care_line_clinical_specialty_care_line
                onDelete: NO ACTION
                onUpdate: NO ACTION
                referencedColumnNames: id
                referencedTableName: care_line
                validate: true
    
    - changeSet:
        id: snomed_group-createTable
        comment: Create table snomed_group
        author: lbergottini
        changes: 
        - createTable: 
            tableName: snomed_group
            columns: 
            - column:
                autoIncrement: true
                constraints:
                    primaryKey: true
                    primaryKeyName: PK_snomed_group
                name: id
                type: int
            - column:
                constraints:
                    nullable: false
                name: description
                type: varchar(100)
            - column:
                constraints:
                    nullable: false
                name: ecl
                type: varchar(255)
            - column:
                constraints:
                    nullable: false
                name: custom_id
                type: int
            - column:
                constraints:
                    nullable: false
                name: last_update
                type: date
                
    - changeSet:
        id: snomed_related_group-createTable
        comment: Create table snomed_related_group
        author: lbergottini
        changes: 
        - createTable: 
            tableName: snomed_related_group
            columns: 
            - column:
                constraints:
                    nullable: false
                name: snomed_id
                type: int
            - column:
                constraints:
                    nullable: false
                name: group_id
                type: int
            - column:
                constraints:
                    nullable: false
                name: orden
                type: int
        -  addPrimaryKey:
                clustered: true        
                columnNames:  snomed_id, group_id  
                constraintName:  PK_snomed_related_group
                tableName:  snomed_related_group  
                validate: true
        - addForeignKeyConstraint:
                baseColumnNames: snomed_id
                baseTableName: snomed_related_group
                constraintName: FK_snomed_related_group_snomed_id
                referencedColumnNames: id
                referencedTableName: snomed
        - addForeignKeyConstraint:
                baseColumnNames: group_id
                baseTableName: snomed_related_group
                constraintName: FK_snomed_related_group_group_id
                referencedColumnNames: id
                referencedTableName: snomed_group
                
    - changeSet:
        id: manual_classification-createTable
        comment: Create table manual_classification
        author: lbergottini
        changes: 
        - createTable: 
            tableName: manual_classification
            columns: 
            - column:
                constraints:
                    primaryKey: true
                    primaryKeyName: PK_manual_classification
                name: id
                type: int
            - column:
                constraints:
                    nullable: false
                name: description
                type: varchar(255)
    
    - changeSet:
        id: snvs_group-createTable
        comment: Create table snvs_group
        author: lbergottini
        changes: 
        - createTable: 
            tableName: snvs_group
            columns: 
            - column:
                name: group_id
                type: int
            - column:
                constraints:
                    nullable: false
                name: event_id
                type: int
            - column:
                constraints:
                    nullable: false
                name: group_event_id
                type: int
            - column:
                constraints:
                    nullable: false
                name: environment
                type: int
            - column:
                constraints:
                    nullable: false
                name: manual_classification_id
                type: int
        - addForeignKeyConstraint:
                baseColumnNames: group_id
                baseTableName: snvs_group
                constraintName: FK_snvs_group_group_id
                referencedColumnNames: id
                referencedTableName: snomed_group
        - addForeignKeyConstraint:
                baseColumnNames: manual_classification_id
                baseTableName: snvs_group
                constraintName: FK_snvs_group_manual_classification_id
                referencedColumnNames: id
                referencedTableName: manual_classification
        - addUniqueConstraint:
                constraintName: UQ_snvs_attributes
                columnNames: group_id, event_id, group_event_id, environment, manual_classification_id
                tableName: snvs_group    
