databaseChangeLog: 
    - logicalFilePath: incrementales-v2_26 

    - changeSet:
          id: update-datatype-id-appointment_order_image
          context: "!schema-only"
          author: mromero
          preConditions:
              - onFail: CONTINUE
              - onError: CONTINUE
              - sqlCheck:
                    expectedResult: "SMALLINT"
                    sql: SELECT data_type FROM information_schema.columns WHERE table_name='appointment_order_image' AND column_name='id';
          changes:
              - sql:
                    sql: |-
                        ALTER TABLE appointment_order_image ALTER COLUMN id SET DATA TYPE BIGINT;
    
    - changeSet:
        id: parameterized_form-createTable
        comment: Create table parameterized_form
        author: jvaldez
        changes:
          - createTable:
              tableName: parameterized_form
              columns:
                - column:
                    autoIncrement: true
                    constraints:
                      primaryKey: true
                      primaryKeyName: PK_parameterized_form
                    name: id
                    type: int
                - column:
                    constraints:
                      nullable: false
                    name: name
                    type: varchar(255)
                - column:
                    constraints:
                      nullable: false
                    name: status_id
                    type: smallint
                    defaultValue: 1
                - column:
                    constraints:
                      nullable: false
                    name: outpatient_enabled
                    type: boolean
                    defaultValue: ${boolean.false}
                - column:
                    constraints:
                      nullable: false
                    name: internment_enabled
                    type: boolean
                    defaultValue: ${boolean.false}
                - column:
                    constraints:
                      nullable: false
                    name: emergency_care_enabled
                    type: boolean
                    defaultValue: ${boolean.false}
                - column:
                    constraints:
                      nullable: false
                    name: created_by
                    type: int
                    defaultValue: -1
                - column:
                    constraints:
                      nullable: false
                    name: updated_by
                    type: int
                    defaultValue: -1
                - column:
                    constraints:
                      nullable: false
                    name: created_on
                    type: datetime
                    defaultValueDate: ${date.now}
                - column:
                    constraints:
                      nullable: false
                    name: updated_on
                    type: datetime
                    defaultValueDate: ${date.now}
                - column:
                    constraints:
                      nullable: false
                    name: deleted
                    type: BOOLEAN
                    defaultValue: ${boolean.false}
                - column:
                    name: deleted_by
                    type: int
                - column:
                    name: deleted_on
                    type: datetime

    - changeSet:
        id: parameterized_form_parameter-createTable
        comment: Create table parameterized_form_parameter
        author: jvaldez
        changes:
          - createTable:
              tableName: parameterized_form_parameter
              columns:
                - column:
                    autoIncrement: true
                    constraints:
                      primaryKey: true
                      primaryKeyName: PK_parameterized_form_parameter
                    name: id
                    type: int
                - column:
                    name: parameterized_form_id
                    type: int
                    constraints:
                      nullable: false
                      references: parameterized_form(id)
                      foreignKeyName: FK_parameterized_form_parameter_form_id
                - column:
                    name: parameter_id
                    type: int
                    constraints:
                      nullable: false
                      references: parameter(id)
                      foreignKeyName: FK_parameterized_form_parameter_parameter_id
                - column:
                    constraints:
                      nullable: false
                    name: order_number
                    type: smallint

    - changeSet:
        id: medicine_group_medicine-createTable
        comment: Create table medicine_group_medicine
        author: fsimaro
        changes:
          - createTable:
              tableName: medicine_group_medicine
              columns:
                - column:
                    autoIncrement: true
                    constraints:
                      primaryKey: true
                      primaryKeyName: PK_medicine_group_medicine
                    name: id
                    type: int
                - column:
                    constraints:
                      references: medicine_group(id)
                      foreignKeyName: FK_medicine_group_medicine_medicine_group_id
                      nullable: false
                    name: medicine_group_id
                    type: int
                - column:
                    constraints:
                      references: medicine_financing_status(id)
                      foreignKeyName: FK_medicine_group_medicine_medicine_id
                      nullable: false
                    name: medicine_id
                    type: int
                - column:
                    constraints:
                      nullable: false
                    name: created_by
                    type: int
                    defaultValue: -1
                - column:
                    constraints:
                      nullable: false
                    name: created_on
                    type: datetime
                    defaultValueDate: ${date.now}
                - column:
                    constraints:
                      nullable: false
                    name: updated_by
                    type: int
                    defaultValue: -1
                - column:
                    constraints:
                      nullable: false
                    name: updated_on
                    type: datetime
                    defaultValueDate: ${date.now}
                - column:
                    constraints:
                      nullable: false
                    name: deleted
                    type: BOOLEAN
                    defaultValue: ${boolean.false}
                - column:
                    name: deleted_by
                    type: INTEGER
                - column:
                    name: deleted_on
                    type: DATETIME

    - changeSet:
        id: medicine_group_problem-createTable
        comment: Create table medicine_group_problem
        author: fsimaro
        changes:
          - createTable:
              tableName: medicine_group_problem
              columns:
                - column:
                    autoIncrement: true
                    constraints:
                      primaryKey: true
                      primaryKeyName: PK_medicine_group_problem
                    name: id
                    type: int
                - column:
                    constraints:
                      references: medicine_group(id)
                      foreignKeyName: FK_medicine_group_problem_medicine_group_id
                      nullable: false
                    name: medicine_group_id
                    type: int
                - column:
                    constraints:
                      references: snomed(id)
                      foreignKeyName: FK_medicine_group_problem_problem_id
                      nullable: false
                    name: problem_id
                    type: int
                - column:
                    constraints:
                      nullable: false
                    name: created_by
                    type: int
                    defaultValue: -1
                - column:
                    constraints:
                      nullable: false
                    name: created_on
                    type: datetime
                    defaultValueDate: ${date.now}
                - column:
                    constraints:
                      nullable: false
                    name: updated_by
                    type: int
                    defaultValue: -1
                - column:
                    constraints:
                      nullable: false
                    name: updated_on
                    type: datetime
                    defaultValueDate: ${date.now}
                - column:
                    constraints:
                      nullable: false
                    name: deleted
                    type: BOOLEAN
                    defaultValue: ${boolean.false}
                - column:
                    name: deleted_by
                    type: INTEGER
                - column:
                    name: deleted_on
                    type: DATETIME

    - changeSet:
        id: addColumn-all_diagnoses-medicine_group
        author: fsimaro
        changes:
          - addColumn:
              tableName: medicine_group
              columns:
                - column:
                    constraints:
                      nullable: false
                    name: all_diagnoses
                    type: boolean
                    defaultValue: ${boolean.true}

    - changeSet:
        id: addColumn-new_id-medication_statement_commercial
        author: mmalyvarni
        changes:
          - addColumn:
              tableName: medication_statement_commercial
              columns:
                - column:
                    autoIncrement: true
                    name: new_id
                    type: int

    - changeSet:
        id: drop-id-medication_statement_commercial
        author: mmalyvarni
        changes:
          - renameColumn:
              columnDataType: int
              oldColumnName: id
              newColumnName: medication_statement_id
              tableName: medication_statement_commercial
          - dropPrimaryKey:
              constraintName: PK_medication_statement_commercial
              dropIndex: true
              tableName: medication_statement_commercial

    - changeSet:
        id: adapt-id-medication_statement_commercial
        comment: Adapta el id de la tabla medication_statement_commercial
        author: mmalyvarni
        changes:
          - renameColumn:
              columnDataType: int
              newColumnName: id
              oldColumnName: new_id
              tableName: medication_statement_commercial
          - addPrimaryKey:
              columnNames: id
              constraintName: PK_medication_statement_commercial
              tableName: medication_statement_commercial
