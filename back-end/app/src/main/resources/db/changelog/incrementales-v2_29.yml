databaseChangeLog: 
    - logicalFilePath: incrementales-v2_29

    - changeSet:
        id: addColumn-required_documentation-medicine_group
        author: fsimaro
        changes:
          - addColumn:
              tableName: medicine_group
              columns:
                - column:
                    name: required_documentation
                    type: text

    - changeSet:
          id: add-indexes-to-document_vital_sign-and-observation_vital_sign
          author: fzudaire
          changes:
              -   sql:
                      sql: |-
                          CREATE INDEX IF NOT EXISTS IDX_document_vital_sign_observation_vital_sign_id ON  document_vital_sign (observation_vital_sign_id);
                          CREATE INDEX IF NOT EXISTS IDX_observation_vital_sign_patient_id ON observation_vital_sign (patient_id);

    - changeSet:
          id: addColumn-has_prosthesis-and-fills-with-existing-data
          author: fzudaire
          changes:
              - addColumn:
                    tableName: surgical_report
                    columns:
                        - column:
                              name: has_prosthesis
                              type: boolean
                              constraints:
                                  nullable: true
              - sql:
                    sql: |-
                        UPDATE surgical_report SET has_prosthesis = TRUE 
                        WHERE EXISTS (
                        	SELECT 1 
                        	FROM document_prosthesis dp
                        	WHERE dp.document_id = surgical_report.document_id
                        );
