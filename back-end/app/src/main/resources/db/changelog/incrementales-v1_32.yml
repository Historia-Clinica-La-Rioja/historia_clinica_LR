databaseChangeLog:
  - logicalFilePath: incrementales-v1_32

  - changeSet:
      id: add-patient_medical_coverage_id-column-internment_episode
      author: flizalde
      changes:
        - addColumn:
            tableName: internment_episode
            columns:
              - column:
                  name: patient_medical_coverage_id
                  type: int
        - addForeignKeyConstraint:
            baseColumnNames: patient_medical_coverage_id
            baseTableName: internment_episode
            constraintName: FK_internment_episode_patient_medical_coverage_id
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: patient_medical_coverage
            validate: true

    - changeSet:
          id: system_property-createTable
          comment: Create table system_property
          author: etrapani
          changes:
              - createTable:
                    tableName: system_property
                    columns:
                        - column:
                            autoIncrement: true
                            constraints:
                              primaryKey: true
                              primaryKeyName: PK_system_property
                            name: id
                            type: int
                        - column:
                              constraints:
                                nullable: false
                              name: property
                              type: varchar(255)
                        - column:
                              name: value
                              type: varchar(255)
                        - column:
                              name: origin
                              type: varchar(255)
                        - column:
                              constraints:
                                nullable: false
                              name: node_id
                              type: varchar(255)
                        - column:
                            name: description
                            type: varchar(255)
                        - column:
                              constraints:
                                  nullable: false
                              name: updated_on
                              type: datetime
                              defaultValueDate: ${date.now}
              - addUniqueConstraint:
                  tableName: system_property
                  columnNames: id, node_id
                  constraintName: UQ_system_property
