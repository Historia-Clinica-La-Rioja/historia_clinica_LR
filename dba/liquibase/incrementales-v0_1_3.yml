#Se agregan tablas Datos Maestros para códigos de SNOMED CT
databaseChangeLog: 
- logicalFilePath: incrementales-v0_1_3
- changeSet: 
    id: observation_status-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO observation_status (id, description) VALUES('307827002 ', 'Estado de registro (hallazgo)');
                INSERT INTO observation_status (id, description) VALUES('261420005', 'Preliminar (calificador)');
                INSERT INTO observation_status (id, description) VALUES('261782000', 'Final (calificador)');
                INSERT INTO observation_status (id, description) VALUES('18307000', 'Modificado (calificador)');
                INSERT INTO observation_status (id, description) VALUES('33714007', 'Corregido (calificador)');
                INSERT INTO observation_status (id, description) VALUES('89925002', 'Cancelado (calificador)');
                INSERT INTO observation_status (id, description) VALUES('723510000', 'Ingresado por error (calificador)');
                INSERT INTO observation_status (id, description) VALUES('261665006', 'Desconocido (calificador)');
 
- changeSet: 
    id: allergy_intolerance_verification_status-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO allergy_intolerance_verification_status (id, description) VALUES('59156000', 'Confirmado por (calificador)');
                INSERT INTO allergy_intolerance_verification_status (id, description) VALUES('76104008', 'No confirmado por (calificador)');
                INSERT INTO allergy_intolerance_verification_status (id, description) VALUES('723511001', 'Refutado (calificador)');
                INSERT INTO allergy_intolerance_verification_status (id, description) VALUES('723510000', 'Ingresado por error (calificador)');
                
- changeSet: 
    id: allergy_intolerance_clinical_status-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO allergy_intolerance_clinical_status (id, description) VALUES('55561003', 'Activo (calificador)');  
                INSERT INTO allergy_intolerance_clinical_status (id, description) VALUES('73425007', 'Inactivo (calificador)');  
                INSERT INTO allergy_intolerance_clinical_status (id, description) VALUES('723506003', 'Resuelto (calificador)');                  

- changeSet: 
    id: allergy_intolerance_category-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO allergy_intolerance_category (id, description) VALUES('414285001', 'Alergia alimentaria (hallazgo)');
                INSERT INTO allergy_intolerance_category (id, description) VALUES('416098002', 'Alergia medicamentosa (hallazgo)');
                INSERT INTO allergy_intolerance_category (id, description) VALUES('426232007', 'Alergia ambiental (hallazgo)');
                INSERT INTO allergy_intolerance_category (id, description) VALUES('402591008', 'Alergia a agente biocida (hallazgo)');
   
- changeSet: 
    id: condition_clinical_status-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO condition_clinical_status (id, description) VALUES('55561003', 'Activo (calificador)'); 
                INSERT INTO condition_clinical_status (id, description) VALUES('246455001', 'Recidiva (calificador)'); 
                INSERT INTO condition_clinical_status (id, description) VALUES('263855007', 'Recaída (calificador)'); 
                INSERT INTO condition_clinical_status (id, description) VALUES('73425007', 'Inactivo (calificador)');  
                INSERT INTO condition_clinical_status (id, description) VALUES('277022003', 'Remisión (calificador)'); 
                INSERT INTO condition_clinical_status (id, description) VALUES('723506003', 'Resuelto (calificador)'); 

- changeSet: 
    id: condition_verification_status-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO condition_verification_status (id, description) VALUES('76104008', 'No confirmado por (calificador)');
                INSERT INTO condition_verification_status (id, description) VALUES('5558000', 'Diagnóstico provisional (calificador contextual) (calificador)');
                INSERT INTO condition_verification_status (id, description) VALUES('47965005', 'Diagnóstico diferencial (calificador)');
                INSERT INTO condition_verification_status (id, description) VALUES('59156000', 'Confirmado por (calificador)');
                INSERT INTO condition_verification_status (id, description) VALUES('723511001', 'Refutado (calificador)');
                INSERT INTO condition_verification_status (id, description) VALUES('723510000', 'Ingresado por error (calificador)');
                
- changeSet: 
    id: condition_problem_type-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO condition_problem_type (id, description) VALUES('55607006', 'Problema (hallazgo)');                 

- changeSet: 
    id: medication_statement_status-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO medication_statement_status (id, description) VALUES('55561003', 'Activo (calificador)');
                INSERT INTO medication_statement_status (id, description) VALUES('255594003', 'Completo (calificador)');
                INSERT INTO medication_statement_status (id, description) VALUES('723510000', 'Ingresado por error (calificador)');
                INSERT INTO medication_statement_status (id, description) VALUES('18629005', 'Administración de fármaco o medicamento (procedimiento)');
                INSERT INTO medication_statement_status (id, description) VALUES('6155003', 'Detenido (calificador)');
                INSERT INTO medication_statement_status (id, description) VALUES('385655000', 'Suspendido (calificador)');
                INSERT INTO medication_statement_status (id, description) VALUES('261665006', 'Desconocido (calificador)');
                INSERT INTO medication_statement_status (id, description) VALUES('266710000', 'Fármacos no ingeridos/tratamiento incompleto (situación)');

- changeSet: 
    id: inmunization_status-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO inmunization_status (id, description) VALUES('255594003', 'Completo (calificador)');  
                INSERT INTO inmunization_status (id, description) VALUES('723510000', 'Ingresado por error (calificador)'); 
                INSERT INTO inmunization_status (id, description) VALUES('385660001', 'No efectuado (calificador)'); 
                
- changeSet: 
    id: document_status-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO document_status (id, description) VALUES('445667001', 'Informe preliminar (elemento de registro)');  
                INSERT INTO document_status (id, description) VALUES('445665009', 'Informe final (elemento de registro)'); 
                INSERT INTO document_status (id, description) VALUES('445664008', 'Informe enmendado (elemento de registro)');  
                INSERT INTO document_status (id, description) VALUES('723510000', 'Ingresado por error (calificador)');  
                
- changeSet: 
    id: internment_episode_status-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO internment_episode_status (id, description) VALUES(1, 'Activo');  
                INSERT INTO internment_episode_status (id, description) VALUES(2, 'Inactivo');  

- changeSet: 
    id: document_type-metadata
    author: saguero
    changes: 
        - sql: 
            sql: |- 
                INSERT INTO document_type (id, description) VALUES(1, 'Anamnesis');  
                INSERT INTO document_type (id, description) VALUES(2, 'Nota de evaluación');  
                INSERT INTO document_type (id, description) VALUES(3, 'Epicrisis');  
             
- changeSet:
    id: patient-addColumn-identity_verification_status&&coments
    author: gmurgolo
    changes:
    - addColumn:
        columns:
        - column:
            name: identity_verification_status_id
            type: smallint
            constraints:
                nullable: true  
        - column:
            name: comments
            type: varchar(255)
            constraints:
                nullable: true
        tableName: patient
    - addForeignKeyConstraint:
        baseColumnNames: identity_verification_status_id
        baseTableName: patient
        constraintName: FK_identity_verification_status_id
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: identity_verification_status
        validate: true


- changeSet:
    comment: Crea tabla shedlock
    id: shedlock
    author: etrapani
    changes:
        - createTable:
            tableName: shedlock
            columns:
            - column:
                name: name
                type: varchar(150)
                constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_shedlock
            - column:
                name: lock_until
                type: DATETIME
            - column:
                name: locked_at
                type: DATETIME
            - column:
                name: locked_by
                type: varchar(150) 

- changeSet:
    id: bed-addColumn-bed_number
    author: lmanterola
    changes:
    - addColumn:
        columns:
        - column:
            name: bed_number
            type: varchar(50)
            constraints:
                nullable: false
        tableName: bed

- changeSet:
    id: room-addColumn-room_number
    author: lmanterola
    changes:
    - addColumn:
        columns:
        - column:
            name: room_number
            type: varchar(50)
            constraints:
                nullable: false
        tableName: room

- changeSet:
    id: bed-unique_constraint
    author: lmanterola
    changes:
        - addUniqueConstraint:
            tableName: bed
            columnNames: bed_number, room_id
            constraintName: UQ_bed

- changeSet:
    id: room-unique_constraint
    author: lmanterola
    changes:
        - addUniqueConstraint:
            tableName: room
            columnNames: room_number, clinical_specialty_sector_id
            constraintName: UQ_room

- changeSet:
    id: renameColumn-healthcare_professional_group-responsable
    author: etrapani
    changes:
    - renameColumn:
        columnDataType: boolean
        newColumnName: responsible
        oldColumnName: responsable
        tableName: healthcare_professional_group

- changeSet:
    id: renameColumn-internment_episode-clinical_speciality_id
    author: etrapani
    changes:
    - renameColumn:
        columnDataType: varchar(20)
        newColumnName: clinical_specialty_id
        oldColumnName: clinical_speciality_id
        tableName: internment_episode

- changeSet:
    id: modifyDataType-internment_episode-clinical_specialty_id
    author: etrapani
    changes:
    - modifyDataType:
        columnName: clinical_specialty_id
        newDataType: int
        tableName: internment_episode

- changeSet:
    id: addForeignKeyConstraint-internment_episode-clinical_specialty_id
    author: etrapani
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: clinical_specialty_id
        baseTableName: internment_episode
        constraintName: FK_internment_episode_clinical_specialty_id
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: clinical_specialty
        validate: true

- changeSet:
    id: healthcare_professional-table
    comments: Tablas staff medico y especialidades médicas
    author: efernandez
    changes:
        - createTable:
            tableName: healthcare_professional
            columns:
                - column:
                    name: id
                    type: int
                    autoIncrement: true
                    constraints:
                        primaryKey: true
                        primaryKeyName: PK_healthcare_professional
                - column:
                    name: license_number
                    type: varchar(512)
                    constraints:
                        nullable: false
                - column:
                    name: person_id
                    type: int
                    constraints:
                        nullable: false
                - column:
                    name: is_medical_doctor
                    type: boolean
                    constraints:
                        nullable: false
        - addForeignKeyConstraint:
            constraintName: FK_healthcare_professional__person_id
            baseTableName: healthcare_professional
            baseColumnNames: person_id
            referencedTableName: person 
            referencedColumnNames: id
            validate: true
            onDelete: CASCADE
            onUpdate: NO ACTION
        - createTable:
            tableName: education_type
            columns:
                - column:
                    name: id
                    type: smallint
                    constraints:
                        primaryKey: true
                        primaryKeyName: PK_education_type
                - column:
                    name: description
                    type: varchar(100)
                    constraints:
                        nullable: false
        - createTable:
            tableName: professional_specialty
            columns:
                - column:
                    name: id
                    type: int
                    autoIncrement: true
                    constraints:
                        primaryKey: true
                        primaryKeyName: PK_professional_specialty
                - column:
                    name: description
                    type: varchar(255)
                    constraints:
                        nullable: false
                - column:
                    name: description_profession_ref
                    type: varchar(255)
                    constraints:
                        nullable: false
                - column:
                    name: sctid_code
                    type: varchar(20)
                    constraints:
                        nullable: true
                - column:
                    name: education_type_id
                    type: smallint
                    constraints:
                        nullable: false
        - addForeignKeyConstraint:
            constraintName: FK_professional_specialty__education_type_id
            baseTableName: professional_specialty
            baseColumnNames: education_type_id
            referencedTableName: education_type 
            referencedColumnNames: id
            validate: true
            onDelete: NO ACTION
            onUpdate: NO ACTION
        - createTable:
            tableName: healthcare_professional_specialty
            columns:
                - column:
                    name: id
                    type: int
                    autoIncrement: true
                    constraints:
                        primaryKey: true
                        primaryKeyName: PK_healthcare_professional_specialty
                - column:
                    name: description
                    type: varchar(255)
                    constraints:
                        nullable: false
                - column:
                    name: healthcare_professional_id
                    type: int
                    constraints:
                        nullable: false
                - column:
                    name: professional_specialty_id
                    type: int
                    constraints:
                        nullable: false
        - addForeignKeyConstraint:
            constraintName: FK_healthcare_professional_specialty__healthcare_professional_id
            baseTableName: healthcare_professional_specialty
            baseColumnNames: healthcare_professional_id
            referencedTableName: healthcare_professional
            referencedColumnNames: id
            validate: true
            onDelete: CASCADE
            onUpdate: NO ACTION
        - addForeignKeyConstraint:
            constraintName: FK_healthcare_professional_specialty__professional_specialty_id
            baseTableName: healthcare_professional_specialty
            baseColumnNames: professional_specialty_id
            referencedTableName: professional_specialty
            referencedColumnNames: id
            validate: true
            onDelete: CASCADE
            onUpdate: NO ACTION

- changeSet:
    id: education_type-data
    comment: Carga de datos education_type
    author: efernandez
    context: "!schema-only"
    changes:
        - sql:
            sql: |-
                INSERT INTO education_type VALUES (1, 'Auxiliarato');
                INSERT INTO education_type VALUES (2, 'Grado Universitario');
                INSERT INTO education_type VALUES (3, 'Tecnicatura');
