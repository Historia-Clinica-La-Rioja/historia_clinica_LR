<div id="main-container" fxLayoutGap="12px">
	<h2>{{'ambulatoria.reference-study-close.TITLE'|translate}} </h2>

	<form [formGroup]="formReferenceClosure" class="counterreference-form" fxLayout="column">
		<mat-form-field appearance="outline" class="closureTypes">

			<mat-label [translate]="'ambulatoria.reference-study-close.CLOSURE_TYPE'">
			</mat-label>
			<mat-select formControlName="closureType">
				<mat-option [value]="closureType" *ngFor="let closureType of closureTypes$ | async">
					{{ closureType.description }}
				</mat-option>
			</mat-select>
			<mat-error translate="forms.REQUIRED"></mat-error>

		</mat-form-field>

		<mat-form-field appearance="outline">
			<mat-label [translate]="'ambulatoria.reference-study-close.PLACEHOLDER_DESCRIPTION'">
			</mat-label>
			<textarea matInput type="text" name="description" formControlName="description"></textarea>
			<mat-error translate="forms.REQUIRED"></mat-error>
		</mat-form-field>
	</form>

	<div id="attach_files" fxLayout="column">
		<div>
			<button mat-button type="button" id="add-request-button" color="primary" class="add-button"
				(click)="fileInput.click()">
				<mat-icon>attachment_icon</mat-icon>
				{{ 'ambulatoria.reference-study-close.UPLOAD_FILES' | translate }}
			</button>
			<span [hidden]="true">
				<input type="file" #fileInput multiple (change)="onSelectFileFormData($event)" />
			</span>
		</div>

		<div *ngIf="selectedFilesShow" class="selected-files">
			<div *ngFor="let fileName of selectedFilesShow; let index = index">
				<span>
					{{fileName}}
				</span>
				<button mat-button color="warn" (click)="removeSelectedFile(index)">
					<mat-icon>delete</mat-icon>
				</button>
			</div>
		</div>
	</div>

	<mat-dialog-actions fxLayout="row" fxLayoutAlign="end start">
		<app-button [buttonType]='buttonTypeFlat' text='ambulatoria.reference-study-close.COMPLETE_BUTTON'
			[isLoading]="isLoading$|async" [disabled]="!formReferenceClosure.valid || (disabled$ | async)"
			(clicked)="completeStudy()">
		</app-button>
	</mat-dialog-actions>
</div>
