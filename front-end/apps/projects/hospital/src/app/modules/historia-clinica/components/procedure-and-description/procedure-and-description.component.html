<app-new-consultation-expansion-section id="diagnosticos"
	*appHasRole="['ESPECIALISTA_MEDICO', 'ENFERMERO_ADULTO_MAYOR','PROFESIONAL_DE_SALUD', 'ESPECIALISTA_EN_ODONTOLOGIA']"
	[title]="title" [icon]="icon"
	[collapsed]="true" [hideBorder]="false" [isEmpty]="isEmptyConcepts">

	<div fxLayout="column" fxLayoutGap="20px">
		<div>
			<button mat-button type="button" id="add-procedure-button" color="primary" (click)="addProcedure()">
				+ {{ buttonTitle | translate }}
			</button>
		</div>
		<app-titled-content-card *ngIf="!procedureService.isEmpty() || procedures?.length"
			[title]="tableTitle">
			<div *ngFor="let procedure of procedures; index as i; last as isLast">
				<div fxLayout="row" fxLayoutAlign="space-between center">
					<div fxLayout="column">
						<span>{{ procedure.snomed.pt }}</span>
					</div>
					<button type="button" mat-icon-button color="warn" (click)="deleteProcedure(i)">
						<mat-icon>delete_outline</mat-icon>
					</button>
				</div>
				<mat-divider class="separation" inset *ngIf="!isLast"></mat-divider>
			</div>
		</app-titled-content-card>
	</div>

	<mat-form-field appearance="outline">
        <mat-label [translate]="'ambulatoria.paciente.surgical-report.DESCRIPTION'"></mat-label>
        <textarea matInput [(ngModel)]="description" (ngModelChange)="onDescriptionChange()" [disabled]="isEmptyConcepts"></textarea>
    </mat-form-field>
</app-new-consultation-expansion-section>
