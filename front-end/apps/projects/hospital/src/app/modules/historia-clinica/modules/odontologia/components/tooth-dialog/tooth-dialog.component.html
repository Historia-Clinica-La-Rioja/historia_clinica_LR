<div fxLayout="column" fxLayoutGap="7px">

	<div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
		<app-tooth #tooth [toothTreatment]="toothTreatment" (selectedSurfacesEmitter)="reciveSelectedSurfaces($event)"
				   [newFinding]="newHallazgoId"
				   [setFirstProcedure]="firstProcedureId"
				   [setSecondProcedure]="secondProcedureId"
				   [setThirdProcedure]="thirdProcedureId">
		</app-tooth>
		<div fxLayout="column">
			<span class="title">Pieza {{data.quadrantCode}}{{data.tooth.code}}</span>
			<span class="subtitle subtitle-font-size">{{selectedSurfacesText}}</span>
		</div>
	</div>

	<div id="records" style="font-size: 13.5px;" *ngIf="historicalRecords$ | async as historicalRecords">
		<span *ngIf="!historicalRecords.length; else displayRecords" style="color: #A8A8A8;">Sin registros.</span>
		<ng-template #displayRecords>
			<div fxLayout="column" fxLayoutGap="10px">
				<div fxLayout="row" fxLayoutGap="5px">
					<span id="firstElement">{{historicalRecords[0].firstElement}}</span>
					<span id="secondElement">{{historicalRecords[0].secondElement}}</span>
				</div>
				<div *ngIf="historicalRecords.length === 1; else olderRecords"></div>
			</div>

			<ng-template #olderRecords>
				<app-hidable-scrollable-data [data]="historicalRecords.slice(1)"></app-hidable-scrollable-data>
			</ng-template>
		</ng-template>
	</div>

	<div fxLayout="column" fxLayoutGap="20px" fxLayoutAlign="center">
		<span class="subtitle subtitle-findings-procedures-font-size">Nuevos hallazgos sobre la pieza:</span>
		<app-typeahead
			id="finding"
			[placeholder]="'Seleccione hallazgo'"
			[options]="filteredDiagnosticsTypeaheadOptions"
			[externalSetValue]="initValueTypeaheadDiagnostics"
			(selectionChange)="findingChanged($event)"
		>
		</app-typeahead>
		<span class="subtitle subtitle-findings-procedures-font-size" >Nuevos procedimientos sobre la pieza:</span>
		<app-typeahead
			id="first_procedure"
			[placeholder]="'Seleccione 1er procedimiento'"
			[options]="filteredProceduresTypeahead"
			[externalSetValue]="initValueTypeaheadFirstProcedure"
			[disabledClearButton]="disabledFirstProcedureButton"
			(selectionChange)="firstProcedureChanged($event)"
		>
		</app-typeahead>
		<div  *ngIf="!selectedSurfaces.length" fxLayout="column" fxLayoutGap="20px" fxLayoutAlign="center">
			<app-typeahead *ngIf="showSecondProcedureTypeahead"
						   id="second_procedure"
						   [placeholder]="'Seleccione 2do procedimiento'"
						   [externalSetValue]="initValueTypeaheadProcedureTwo"
						   [options]="filteredProceduresTypeahead"
						   [disabledClearButton]="disabledSecondProcedureButton"
						   (selectionChange)="secondProcedureChanged($event)"
			>
			</app-typeahead>
			<app-typeahead *ngIf="showThirdProcedureTypeahead"
						   id="third_procedure"
						   [placeholder]="'Seleccione 3er procedimiento'"
						   [externalSetValue]="initValueTypeaheadProcedureThree"
						   [options]="filteredProceduresTypeahead"
						   (selectionChange)="thirdProcedureChanged($event)"
			>
			</app-typeahead>
		</div>
	</div>
	<mat-dialog-actions fxLayoutAlign="end end">
		<button mat-stroked-button color="primary" mat-dialog-close type="button">Cancelar </button>
		<button mat-raised-button color="primary" (click)="confirm()">Confirmar </button>
	</mat-dialog-actions>
</div>
