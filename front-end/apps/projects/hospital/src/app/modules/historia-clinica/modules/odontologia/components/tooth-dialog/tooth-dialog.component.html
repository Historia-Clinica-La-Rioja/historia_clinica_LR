<div fxLayout="column" fxLayoutGap="7px">

	<div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="10px">
		<app-tooth #tooth [toothTreatment]="toothTreatment" (selectedSurfacesEmitter)="reciveSelectedSurfaces($event)"
				   [newFinding]="newHallazgoId"
				   [setFirstProcedure]="firstProcedureId"
				   [setSecondProcedure]="secondProcedureId"
				   [setThirdProcedure]="thirdProcedureId">
		</app-tooth>
		<div fxLayout="column">
			<span class="title">Pieza {{data.quadrantCode}}{{data.tooth.code}}</span>
			<span class="subtitle">{{selectedSurfacesText}}</span>
		</div>
	</div>

	<div id="records" style="font-size: 13.5px;" *ngIf="historicalRecords$ | async as historicalRecords">
		<span *ngIf="!historicalRecords.length; else displayRecords" style="color: #A8A8A8;">Sin registros.</span>
		<ng-template #displayRecords>
			<div fxLayout="column" fxLayoutGap="10px">
				<div fxLayout="row" fxLayoutGap="5px">
					<span id="firstElement">{{historicalRecords[0].firstElement}}</span>
					<span id="secondElement">{{historicalRecords[0].secondElement}}</span>
				</div>
				<div *ngIf="historicalRecords.length === 1; else olderRecords"></div>
			</div>

			<ng-template #olderRecords>
				<app-hidable-scrollable-data [data]="historicalRecords.slice(1)"></app-hidable-scrollable-data>
			</ng-template>
		</ng-template>
	</div>

	<div>
		<div *ngIf="!selectedSurfaces.length" fxLayout="column" fxLayoutGap="15px" fxLayoutAlign="center">
			<app-typeahead
				id="hallazgo pieza"
				[placeholder]="'Seleccione hallazgo'"
				[options]="filteredDiagnosticsTypeaheadOptions"
				[externalSetValue]="initValueDiagnosticsPieceTypeahead"
				(selectionChange)="findingChanged($event)"
			>
			</app-typeahead>
			<app-typeahead
				id="primer procedimiento pieza"
				[placeholder]="'Seleccione 1er procedimiento'"
				[options]="filteredProceduresTypeahead"
				[externalSetValue]="initValueTypeaheadPieceFirstProcedure"
				[disabledClearButton]="disabledFirstProcedureButton"
				(selectionChange)="firstProcedureChanged($event)"
			>
			</app-typeahead>
			<app-typeahead
				id="segundo procedimiento pieza"
				[placeholder]="'Seleccione 2do procedimiento'"
				[externalSetValue]="initValueTypeaheadProcedureTwo"
				[options]="filteredProceduresTypeahead"
				[disabledClearButton]="disabledSecondProcedureButton"
				(selectionChange)="secondProcedureChanged($event)"
			>
			</app-typeahead>
			<app-typeahead
				id="tercer procedimiento pieza"
				[placeholder]="'Seleccione 3er procedimiento'"
				[externalSetValue]="initValueTypeaheadProcedureThree"
				[options]="filteredProceduresTypeahead"
				(selectionChange)="thirdProcedureChanged($event)"
			>
			</app-typeahead>
		</div>
		<div *ngIf="selectedSurfaces.length" fxLayout="column" fxLayoutGap="15px" fxLayoutAlign="center">
			<app-typeahead
				id="hallazgo cara"
				[placeholder]="'Seleccione hallazgo'"
				[options]="filteredDiagnosticsTypeaheadOptions"
				[externalSetValue]="initValueDiagnosticsSurfaceTypeahead"
				(selectionChange)="findingChanged($event)"
			>
			</app-typeahead>
			<app-typeahead
				id="primer procedimiento cara"
				[placeholder]="'Seleccione 1er procedimiento'"
				[options]="filteredProceduresTypeahead"
				[externalSetValue]="initValueTypeaheadSurfaceFirstProcedure"
				(selectionChange)="firstProcedureChanged($event)"
			>
			</app-typeahead>
		</div>
	</div>
	<mat-dialog-actions fxLayoutAlign="end end">
		<button mat-stroked-button color="primary" mat-dialog-close type="button">Cancelar </button>
		<button mat-raised-button color="primary" (click)="confirm()">Confirmar </button>
	</mat-dialog-actions>
</div>
