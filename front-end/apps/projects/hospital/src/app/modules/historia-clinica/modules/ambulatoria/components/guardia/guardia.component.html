<app-content width="full">
    <div fxLayout="row" fxLayoutAlign="space-between center" class="margin-bottom">
        <span class="mat-h2"> {{ 'ambulatoria.paciente.guardia.TAB_LABEL' | translate }} </span>
        <div fxLayout="row" fxLayoutGap="20px">
            <button *ngIf="episodeState === STATES.EN_ATENCION || episodeState === STATES.EN_ESPERA" id="edit-episode"
                mat-raised-button color="primary" (click)="goToEditEpisode()">
                {{ 'ambulatoria.paciente.guardia.EDIT_BUTTON' | translate | uppercase }}
            </button>
            <button *ngIf="episodeState === STATES.EN_ATENCION" id="cancel-attention" mat-raised-button color="primary"
                (click)="cancelAttention()">
                {{ 'ambulatoria.paciente.guardia.CANCEL_BUTTON' | translate | uppercase }}
            </button>
            <div *appHasRole="['ESPECIALISTA_MEDICO', 'ENFERMERO', 'PROFESIONAL_DE_SALUD']">
                <button *ngIf="episodeState === STATES.EN_ATENCION" id="alta-medica" mat-raised-button color="primary"
                    (click)="goToMedicalDischarge()">
                    {{ 'ambulatoria.paciente.guardia.MEDICAL_DISCHARGE_BUTTON' | translate | uppercase }}
                </button>
            </div>
            <div *appHasRole="['ADMINISTRATIVO']">
                <button *ngIf="episodeState === STATES.CON_ALTA_MEDICA" id="administrative-discharge" mat-raised-button
                    color="primary" (click)="goToAdministrativeDischarge()">
                    {{ 'ambulatoria.paciente.guardia.ADMINISTRATIVE_DISCHARGE_BUTTON' | translate | uppercase }}
                </button>
            </div>
        </div>
    </div>

    <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px">
        <div fxLayout="column" fxFlex="50%" fxLayoutGap="20px">
            <app-resumen-de-guardia *ngIf="showEmergencyCareSummary" [episodeId]="episodeId"
                (triageRiskFactors)="updateRiskFactors($event)">
            </app-resumen-de-guardia>
        </div>

        <div fxLayout="column" fxFlex="50%" fxLayoutGap="20px">
            <app-summary-card [header]="factoresDeRiesgoSummary"
                [tooltip]="'ambulatoria.paciente.guardia.RISK_FACTORS_TOOLTIP'">
                <mat-card-content>
                    <div fxLayout="row wrap" *ngIf="riskFactors?.length else noData">
                        <app-factor-de-riesgo *ngFor="let riskFactor of riskFactors" [riskFactor]="riskFactor.value"
                            [description]="riskFactor.description">
                        </app-factor-de-riesgo>
                    </div>
                </mat-card-content>
            </app-summary-card>
        </div>
    </div>
</app-content>

<ng-template #noData>
    <app-no-data></app-no-data>
</ng-template>