<app-dock-popup [dockPopupRef]="dockPopupRef" [header]="{ title:'Parte AnestÃ©sico'} ">
    <div body fxLayout="column" fxLayoutGap="20px">
        <app-new-consultation-expansion-section id="diagnosis-expansion-section"
            [title]="'internaciones.anesthesic-report.diagnosis.TITLE' | translate" icon="assignment"
            [collapsed]="false" [isEmpty]="false" [hideBorder]="true">
            <app-diagnosticos id="diagnosis" [showTitle]="false" [(mainDiagnosis)]="mainDiagnosis"
                [(listDiagnosis)]="diagnosis" [type]="'PARTE ANESTESICO'"></app-diagnosticos>
        </app-new-consultation-expansion-section>

        <app-new-consultation-expansion-section id="proposed-surgery-expansion-section"
            [title]="'internaciones.anesthesic-report.proposed-surgery.TITLE' | translate" icon="assignment"
            [collapsed]="true" [isEmpty]="anesthesicReportProposedSurgeryService.isEmpty()" [hideBorder]="false">
            <app-proposed-surgery [service]="anesthesicReportProposedSurgeryService"></app-proposed-surgery>
        </app-new-consultation-expansion-section>

        <app-new-consultation-expansion-section id="anthropometric-data-expansion-section"
            [title]="'internaciones.anesthesic-report.anthropometric-data.TITLE' | translate" icon="assignment"
            [collapsed]="true" [isEmpty]="anesthesicReportAnthropometricDataService.isEmpty()" [hideBorder]="false">
            <app-anesthetic-report-anthropometric-data [patientId]="data.patientId"
                [service]="anesthesicReportAnthropometricDataService"></app-anesthetic-report-anthropometric-data>
        </app-new-consultation-expansion-section>

        <app-new-consultation-expansion-section id="anesthesic-clinical-evaluation-expansion-section"
            [title]="'internaciones.anesthesic-report.anesthesic-clinical-evaluation.TITLE' | translate"
            icon="assignment" [collapsed]="true" [isEmpty]="anestheticReportClinicalEvaluationService.isEmpty()"
            [hideBorder]="false">
            <app-anesthetic-report-clinical-evaluation
                [service]="anestheticReportClinicalEvaluationService"></app-anesthetic-report-clinical-evaluation>
        </app-new-consultation-expansion-section>

        <app-new-consultation-expansion-section id="anesthesic-history-expansion-section"
            [title]="'internaciones.anesthesic-report.anesthetic-history.TITLE' | translate" icon="assignment"
            [collapsed]="true" [isEmpty]="anestheticReportAnestheticHistoryService.isEmpty()" [hideBorder]="false">
            <app-anesthetic-report-anesthetic-history
                [service]="anestheticReportAnestheticHistoryService"></app-anesthetic-report-anesthetic-history>
        </app-new-consultation-expansion-section>

        <app-new-consultation-expansion-section id="usual-medication-expansion-section"
            [title]="'internaciones.anesthesic-report.usual-medication.TITLE' | translate" icon="assignment"
            [collapsed]="true" [isEmpty]="medicacionesNuevaConsultaService.isEmpty()" [hideBorder]="false">
            <app-anesthetic-report-usual-medication [service]="medicacionesNuevaConsultaService"></app-anesthetic-report-usual-medication>
        </app-new-consultation-expansion-section>

        <app-new-consultation-expansion-section id="premedication-and-food-intake-expansion-section"
            [title]="'internaciones.anesthesic-report.premedication-and-food-intake.TITLE' | translate" icon="assignment"
            [collapsed]="true" [isEmpty]="premedicationAndFoodIntakeService.isEmpty() && !formFoodIntake.value.lastFoodIntake" [hideBorder]="false">
            <app-anesthetic-report-premedication-and-food-intake [service]="premedicationAndFoodIntakeService">
                <ng-container food-intake-form>

					<form [formGroup]="formFoodIntake">
                        <mat-form-field appearance="outline" data-id="food-intake-selector">
                            <mat-select id="lastFoodIntake" formControlName="lastFoodIntake">
                                <mat-option [value]="time" *ngFor="let time of possibleTimesList">
                                    {{ time | viewDateDto:'time' | date:'shortTime' }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
					</form>

				</ng-container>
            </app-anesthetic-report-premedication-and-food-intake>
        </app-new-consultation-expansion-section>

        <app-new-consultation-expansion-section id="record-expansion-section"
            [title]="'internaciones.anesthesic-report.record.TITLE' | translate" icon="assignment"
            [collapsed]="true" [isEmpty]="anestheticReportRecordService.isEmpty()" [hideBorder]="false">
            <app-anesthetic-report-person-record [service]="anestheticReportRecordService">
                <ng-container person-record-form>

					<form [formGroup]="personalRecordForm">
						<mat-label [translate]="'internaciones.anesthesic-report.record.OBSERVATIONS'"></mat-label>
                        <mat-form-field appearance="outline" data-id="observations">
                            <textarea matInput type="text" id="observations-input" formControlName="observations"
                                placeholder="{{'internaciones.anesthesic-report.record.ADD_OBSERVATIONS' | translate }}">
                            </textarea>
                        </mat-form-field>

                        <div fxLayout="column">
                            <mat-label [translate]="'internaciones.anesthesic-report.record.ASA'"></mat-label>
                            <mat-form-field appearance="outline" data-id="ASA" class="asa-data">
                                <mat-select formControlName="asa" placeholder="Seleccionar (de 1 a 5)">
                                    <mat-option *ngFor="let option of ASAOptions" [value]="option">
                                        {{ option }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
					</form>

                </ng-container>
            </app-anesthetic-report-person-record>
        </app-new-consultation-expansion-section>
    </div>

    <div actions id="buttons" fxLayoutAlign="end">
        <app-button [color]="'primary'" [isLoading]="isLoading" [text]="'buttons.CONFIRM' | translate | uppercase"
            [buttonType]="'mat-raised-button'" (clicked)="save()">
        </app-button>
    </div>
</app-dock-popup>