<app-content width="full">
	<div id="header" fxLayout="row" fxLayoutAlign="space-between center">
		<div id="title">
			<h2 [translate]="'ambulatoria.paciente.vacunas.TITLE'"></h2>
		</div>
		<div id="add_button" *appHasRole="['ENFERMERO']">
			<ng-container *ngIf="hasConfirmedAppointment">
				<button mat-flat-button color="primary" (click)=goToAplicarVacuna()>
					<span>{{'ambulatoria.paciente.vacunas.ADD' | translate | uppercase }}</span>
				</button>
			</ng-container>
		</div>

		<div id="add_button" *appHasRole="['ENFERMERO']">
			<ng-container *ngIf="enableVaccineV2">
				<button mat-flat-button color="primary" (click)=goToAgregarVacunas()>
					<span>{{'ambulatoria.paciente.vacunas2.ADD' | translate | uppercase }}</span>
				</button>
			</ng-container>
		</div>

	</div>



	<div fxLayout="column" fxLayoutGap="20px">
		<div fxFlex="100%">
			<app-summary-card [header]="vacunasSummary" [tooltip]="'historia-clinica.summary-card.vacunas.TOOLTIP'"
				[canEdit]="['PROFESIONAL_DE_SALUD', 'ESPECIALISTA_MEDICO', 'ENFERMERO']" [editable]="true"
				(openInNew)="openDialog()">
				<ng-container *ngIf="!vaccines.length">
						<span class="no-info"  fxLayoutAlign="center" [translate]="'ambulatoria.paciente.vacunas.NO-INFO'"></span>
				</ng-container>

				<ng-container *ngIf="vaccines.length">
				<div fxLayout="column">
					<mat-list-item class="vaccines-table-header-text" >
						<div fxFlex="70%"><span  [translate]="'ambulatoria.paciente.vacunas.NAME'"></span></div>
						<div fxFlex="15%"><span  [translate]="'ambulatoria.paciente.vacunas.DOSE'"></span></div>
						<div fxFlex="10%"><span  [translate]="'ambulatoria.paciente.vacunas.DATE'"></span></div>
					</mat-list-item>
				</div>
			</ng-container>
				<ng-container *ngFor="let vaccine of vaccines; let i = index">
					<div fxLayout="row" fxLayoutAlign="center center">
						<div fxFlex="70%">
							<div mat-line class="capitalize-first-letter"> {{vaccine.snomed.pt}}</div>
						</div>
						<div fxFlex="15%" >
							<ng-container *ngIf="vaccine.dose?.description else noInfo">
								<strong class="dose">{{vaccine.dose?.description}}</strong>
							</ng-container>
						</div>
						<div fxFlex="10%" class="padding-to-align-chip">
							<ng-container *ngIf="vaccine.administrationDate">
								<span>{{vaccine.administrationDate | viewDate }}</span>
							</ng-container>
						</div>
						<div fxFlex="5%">
							<button *appHasRole="['ESPECIALISTA_MEDICO', 'PROFESIONAL_DE_SALUD', 'ENFERMERO']"
								mat-icon-button [matMenuTriggerFor]="menu">
								<mat-icon>more_vert</mat-icon>
							</button>
							<mat-menu #menu="matMenu">
								<button mat-menu-item (click)="goToDetailsVaccine(vaccine)">
									<span [translate]="'ambulatoria.paciente.vacunas.DETAILS'"></span>
								</button>
							</mat-menu>
						</div>
					</div>
					<mat-divider></mat-divider>
				</ng-container>
			</app-summary-card>
		</div>
	</div>
</app-content>

<ng-template #noInfo>
	<span class="no-info" [translate]="'ambulatoria.paciente.vacunas.details.NO-INFO'"></span>
</ng-template>
