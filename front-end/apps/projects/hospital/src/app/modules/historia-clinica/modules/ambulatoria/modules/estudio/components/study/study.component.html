<div fxLayout="column" fxLayoutGap="30px">
	<app-category-header-divider [header]="studyHeader"></app-category-header-divider>

	<div id="content" fxLayout="column" fxLayoutGap="50px">
		<div fxLayout="row" *ngFor="let study of studies">
			<app-study-list-element fxFlex="100" [content]="contentBuilder(study.diagnosticInformation)"
				[wasCreatedDuringInternment]="wasCreatedDuringSource(study.diagnosticInformation.source)"></app-study-list-element>
			<div actions *ngIf="study.diagnosticInformation.statusId !== STUDY_STATUS.ERROR.id">
				<button mat-icon-button [matMenuTriggerFor]="menu" >
					<mat-icon>more_vert</mat-icon>
				</button>
				<mat-menu #menu="matMenu">
					<ng-container *appHasRole="['ESPECIALISTA_MEDICO', 'ENFERMERO', 'PROFESIONAL_DE_SALUD', 'ESPECIALISTA_EN_ODONTOLOGIA']">
						<button mat-menu-item (click)="downloadOrder(study.diagnosticInformation.serviceRequestId)">
							<span [translate]="'ambulatoria.paciente.ordenes_prescripciones.menu_items.DOWNLOAD_STUDY'"></span>
						</button>
					</ng-container>
					<ng-container *appHasRole="['ESPECIALISTA_MEDICO', 'ESPECIALISTA_EN_ODONTOLOGIA', 'PERSONAL_DE_IMAGENES', 'PERSONAL_DE_LABORATORIO']">
						<button mat-menu-item (click)="completeStudy(study.diagnosticInformation)" *ngIf="study.diagnosticInformation.statusId === STUDY_STATUS.REGISTERED.id">
							<span [translate]="'ambulatoria.paciente.ordenes_prescripciones.menu_items.COMPLETE'"></span>
						</button>
					</ng-container>
					<ng-container *appHasRole="['ESPECIALISTA_MEDICO', 'ESPECIALISTA_EN_ODONTOLOGIA']">
						<button mat-menu-item (click)="deleteStudy(study.diagnosticInformation)" *ngIf="study.diagnosticInformation.statusId === STUDY_STATUS.REGISTERED.id"
						[disabled]="!study.canBeDeleted">
							<span [translate]="'ambulatoria.paciente.ordenes_prescripciones.menu_items.DELETE'"></span>
						</button>
					</ng-container>
					<ng-container *appHasRole="['ESPECIALISTA_MEDICO', 'ENFERMERO', 'PROFESIONAL_DE_SALUD', 'ESPECIALISTA_EN_ODONTOLOGIA', 'PERSONAL_DE_IMAGENES', 'PERSONAL_DE_LABORATORIO']">
						<button mat-menu-item (click)="showStudyResults(study.diagnosticInformation)" *ngIf="study.diagnosticInformation.statusId === STUDY_STATUS.FINAL.id">
							<span [translate]="'ambulatoria.paciente.ordenes_prescripciones.menu_items.SHOW_RESULTS'"></span>
						</button>
					</ng-container>
				</mat-menu>
			</div>
		</div>
	</div>
</div>
