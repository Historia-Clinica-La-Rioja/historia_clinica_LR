<app-content width="full">

    <section class="aside">
        <mat-stepper linear #stepper *ngIf="!showMap">
            <mat-step [stepControl]="institutionAddressForm">
                <h1 [translate]="'gis.institution-data.TITLE'"></h1>
                <form [formGroup]="institutionAddressForm">
                    <ng-template matStepLabel>
                        <span [translate]="'gis.steppers.INSTITUTION_DATA'"></span>
                    </ng-template>

                    <app-title-description-list 
                        *ngIf="institution"
                        [title]="'gis.address.INSTITUTION'"
                        [descriptionData]="[{description: institution.name}]">
                    </app-title-description-list>

                    <div class="m-top">
                        <mat-label [translate]="'gis.address.STATE'"></mat-label>
                        <app-typeahead
                            [externalSetValue]="stateInitValue"
                            [required]="true"
                            [options]="states" 
                            (selectionChange)="setState($event)">
                        </app-typeahead>
                        <mat-error class="vanilla-mat-error" *ngIf="hasError(institutionAddressForm, 'required', 'stateId')">
                            <span translate="forms.REQUIRED"></span>
                        </mat-error>
                    </div>
            
                    <div class="m-top">
                        <mat-label [translate]="'gis.address.DEPARTMENT'"></mat-label>
                        <app-typeahead
                            [externalSetValue]="departmentInitValue"
                            [required]="true"
                            [options]="departments" 
                            (selectionChange)="setDepartment($event)">
                        </app-typeahead>
                        <mat-error class="vanilla-mat-error" *ngIf="hasError(institutionAddressForm, 'required', 'departmentId')">
                            <span translate="forms.REQUIRED"></span>
                        </mat-error>
                    </div>
            
                    <div class="m-top">
                        <mat-label [translate]="'gis.address.CITY'"></mat-label>
                        <app-typeahead
                            [externalSetValue]="cityInitValue"
                            [required]="true"
                            [options]="cities" 
                            (selectionChange)="setCity($event)">
                        </app-typeahead>
                        <mat-error class="vanilla-mat-error" *ngIf="hasError(institutionAddressForm, 'required', 'cityId')">
                            <span translate="forms.REQUIRED"></span>
                        </mat-error>
                    </div>
            
                    <div class="street-container m-top">
                        <div class="street-house-number">
                            <mat-label [translate]="'gis.address.STREET'"></mat-label>
                            <mat-form-field appearance="outline">
                                <input matInput type="text" formControlName="streetName" placeholder="{{'gis.institution-data.STREET_PLACEHOLDER' | translate}}">
                                <mat-error *ngIf="hasError(institutionAddressForm, 'required', 'streetName')">
                                    <span translate="forms.REQUIRED"></span>
                                </mat-error>
                            </mat-form-field>
                        </div>
            
                        <div class="street-house-number">
                            <mat-label [translate]="'gis.address.HOUSE_NUMBER'"></mat-label>
                            <mat-form-field appearance="outline">
                                <input matInput type="text" formControlName="houseNumber" placeholder="{{'gis.institution-data.HOUSE_NUMBER_PLACEHOLDER' | translate}}">
                                <mat-error *ngIf="hasError(institutionAddressForm, 'required', 'houseNumber')">
                                    <span translate="forms.REQUIRED"></span>
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
            
                    <div class="actions">
                        <button [disabled]="institutionAddressForm.invalid" mat-button mat-raised-button color="primary" translate="buttons.NEXT"></button>
                    </div>
              </form>
            </mat-step>
          </mat-stepper>
    </section>

</app-content>