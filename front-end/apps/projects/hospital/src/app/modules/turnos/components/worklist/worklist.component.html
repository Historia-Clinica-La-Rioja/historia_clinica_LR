<section class="worklist-section">
    <mat-card class="main-card">
        <h2 class="page-title">{{'image-network.appointments.WORKLIST' | translate }}</h2>

        <div *ngIf="permission; else noPermission">
            <mat-form-field class="dropdown-container" appearance="outline">
                <mat-label [translate]="'image-network.equipment-diary-setup.EQUIPMENT_SELECT'"></mat-label>
                <mat-select id="equipment" (selectionChange)="filterAppointments($event)" fxFlex="98%">
                    <mat-option *ngFor="let equipment of equipments" id="equipment.name" [value]="equipment">
                        {{equipment.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-card class="worklist-card" *ngIf="detailedAppointments.length && !isFetchingData">
                <mat-list class="mat-form-field-wrapper">
                    <div *ngFor="let appointment of detailedAppointments">
                        <mat-list-item class="appointment-detail">
                            <div class="appointment-container" fxFlex="100">
                                <app-colored-label class="personalized-label uppercase" fxFlex.xl="7" fxFlex.lg="9"
                                    fxFlex.gt-sm="13" description={{appointment.description}}
                                    color="{{appointment.color}}"></app-colored-label>

                                <div class="patient-information" fxFlex.gt-sm="55">
                                    <span class="patient-name"> {{appointment.lastName}}
                                        <span class="naming"
                                            *ngIf="nameSelfDeterminationFF && appointment.nameSelfDetermination.length">
                                            {{appointment.nameSelfDetermination}}
                                        </span>
                                        <span class="naming"
                                            *ngIf="!nameSelfDeterminationFF || !appointment.nameSelfDetermination.length">
                                            {{appointment.firstName}}
                                        </span>
                                    </span>
                                    <span class="patient-identification grey smaller-font">DNI
                                        {{appointment.data.patient.person.identificationNumber}} - ID
                                        {{appointment.data.patient.id}}</span>
                                </div>

                                <div class="appointment-date-information smaller-font" fxFlex.gt-sm="15">
                                    <span class="grey">{{appointment.date}}</span>
                                    <span class="grey">{{appointment.time}} hs.
                                    </span>
                                </div>
                            </div>
                        </mat-list-item>
                        <mat-divider></mat-divider>
                    </div>
                </mat-list>
            </mat-card>

            <div class="spinner equipments-loader" *ngIf="isFetchingData">
                <mat-spinner color="primary"></mat-spinner>
            </div>
        </div>
    </mat-card>

    <ng-template #noPermission>
        <app-no-data *appHasRole="['TECNICO']" [message]="mssg"></app-no-data>
    </ng-template>
</section>