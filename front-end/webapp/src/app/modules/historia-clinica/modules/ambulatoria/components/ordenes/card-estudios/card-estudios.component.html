<ng-template #noInfo>
    <app-no-data></app-no-data>
</ng-template>
<app-summary-card id="estudios" [header]="estudios"
                                [editable]="true"
                                [canEdit]="['ENFERMERO', 'ESPECIALISTA_MEDICO', 'PROFESIONAL_DE_SALUD']"
                                (openInNew)="openDialogNewStudy()">

    <mat-list id="lista-estudios" *ngIf="diagnosticReportsInfo?.length > 0 else noInfo">
        <div fxLayout="row" *ngFor="let diagnosticReport of diagnosticReportsInfo">
            <app-item-prescripciones fxFlex="100%" mat-list-item class="item-padding" [prescriptionItemData]="prescriptionItemDataBuilder(diagnosticReport)">
                <div actions>
                    <button mat-icon-button [matMenuTriggerFor]="menu" >
                        <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="completeStudy(diagnosticReport)" *ngIf="diagnosticReport.statusId === STUDY_STATUS.REGISTERED.id">
                            <span [translate]="'ambulatoria.paciente.ordenes_prescripciones.menu_items.COMPLETE'"></span>
                        </button>
                        <button mat-menu-item (click)="deleteStudy(diagnosticReport.id)" *ngIf="diagnosticReport.statusId === STUDY_STATUS.REGISTERED.id">
                            <span [translate]="'ambulatoria.paciente.ordenes_prescripciones.menu_items.DELETE'"></span>
                        </button>
                        <button mat-menu-item (click)="showStudyResults(diagnosticReport)" *ngIf="diagnosticReport.statusId === STUDY_STATUS.FINAL.id">
                            <span [translate]="'ambulatoria.paciente.ordenes_prescripciones.menu_items.SHOW_RESULTS'"></span>
                        </button>
                    </mat-menu>
                </div>

                <span prescription-number mat-line class="mat-body element-light-color">
                    Orden #{{diagnosticReport.serviceRequestId}}
                </span>
            </app-item-prescripciones>
            <mat-divider></mat-divider>
        </div>
    </mat-list>
</app-summary-card>