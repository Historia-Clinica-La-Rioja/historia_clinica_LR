<div class="container">
	<form id="epicrisis-form" (keydown.enter)="false" [formGroup]="form" (ngSubmit)="save()">
		<section id="title">
			<h2 class="page-title" [translate]="'internaciones.epicrisis.TITLE'"></h2>
			<h3 [translate]="'internaciones.epicrisis.SUBTITLE'"></h3>
		</section>

		<section id="diagnosticos">
			<h2 class="mat-h2" [translate]="'internaciones.epicrisis.diagnosticos.TITLE'"></h2>
			<table mat-table [dataSource]="diagnosis.data" class="secondary">

				<ng-container *ngFor="let column of diagnosis.columns" [matColumnDef]="column.def">
					<th *matHeaderCellDef>{{ column.header | translate }}</th>
					<td mat-cell *matCellDef="let element"> {{ column.text(element) }} </td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="diagnosis.displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: diagnosis.displayedColumns;"></tr>
			</table>
			<app-no-data class="table" *ngIf="diagnosis.data.length === 0"></app-no-data>

		</section>

		<section id="personalHistories">
			<h2 class="mat-h2" [translate]="'internaciones.epicrisis.antecedentes-personales.TITLE'"></h2>
			<table mat-table [dataSource]="personalHistories.data" class="secondary">

				<ng-container *ngFor="let column of personalHistories.columns" [matColumnDef]="column.def">
					<th *matHeaderCellDef>{{ column.header | translate }}</th>
					<td mat-cell *matCellDef="let element"> {{ column.text(element) }} </td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="personalHistories.displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: personalHistories.displayedColumns;"></tr>
			</table>
			<app-no-data class="table" *ngIf="personalHistories.data.length === 0"></app-no-data>

		</section>

		<section id="familyHistories">
			<h2 class="mat-h2" [translate]="'internaciones.epicrisis.antecedentes-familiares.TITLE'"></h2>
			<table mat-table [dataSource]="familyHistories.data" class="secondary">

				<ng-container *ngFor="let column of familyHistories.columns" [matColumnDef]="column.def">
					<th *matHeaderCellDef>{{ column.header | translate }}</th>
					<td mat-cell *matCellDef="let element"> {{ column.text(element) }} </td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="familyHistories.displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: familyHistories.displayedColumns;"></tr>
			</table>
			<app-no-data class="table" *ngIf="familyHistories.data.length === 0"></app-no-data>

		</section>

		<section id="allergies">
			<h2 class="mat-h2" [translate]="'internaciones.epicrisis.alergias.TITLE'"></h2>
			<table mat-table [dataSource]="diagnosis.data" class="secondary">

				<ng-container *ngFor="let column of allergies.columns" [matColumnDef]="column.def">
					<th *matHeaderCellDef>{{ column.header | translate }}</th>
					<td mat-cell *matCellDef="let element"> {{ column.text(element) }} </td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="allergies.displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: allergies.displayedColumns;"></tr>
			</table>
			<app-no-data class="table" *ngIf="allergies.data.length === 0"></app-no-data>

		</section>

		<section id="inmunizations">
			<h2 class="mat-h2" [translate]="'internaciones.epicrisis.vacunas.TITLE'"></h2>
			<table mat-table [dataSource]="diagnosis.data" class="secondary">

				<ng-container *ngFor="let column of inmunizations.columns" [matColumnDef]="column.def">
					<th *matHeaderCellDef>{{ column.header | translate }}</th>
					<td mat-cell *matCellDef="let element"> {{ column.text(element) }} </td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="inmunizations.displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: inmunizations.displayedColumns;"></tr>
			</table>
			<app-no-data class="table" *ngIf="inmunizations.data.length === 0"></app-no-data>

		</section>

		<section id="medications">
			<h2 class="mat-h2" [translate]="'internaciones.epicrisis.medicacion.TITLE'"></h2>
			<table mat-table [dataSource]="diagnosis.data" class="secondary">

				<ng-container *ngFor="let column of medications.columns" [matColumnDef]="column.def">
					<th *matHeaderCellDef>{{ column.header | translate }}</th>
					<td mat-cell *matCellDef="let element"> {{ column.text(element) }} </td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="medications.displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: medications.displayedColumns;"></tr>
			</table>
			<app-no-data class="table" *ngIf="medications.data.length === 0"></app-no-data>

		</section>


		<section id="observations">
			<h2 [translate]="'internaciones.epicrisis.observations.TITLE'"></h2>
			<mat-card>
				<mat-card-content formGroupName="observations">
					<div>
						<mat-label [translate]="'internaciones.epicrisis.observations.EVOLUTION_NOTE'"></mat-label>
						<mat-form-field [floatLabel]="'never'" appearance="outline">
							<textarea matInput type="text" id="evolutionNote" name="evolutionNote"
									  formControlName="evolutionNote">
							</textarea>
							<mat-error [translate]="'forms.REQUIRED'">
							</mat-error>
						</mat-form-field>
					</div>
					<div>
						<mat-label [translate]="'internaciones.epicrisis.observations.STUDIES_SUMMARY'"></mat-label>
						<mat-form-field [floatLabel]="'never'" appearance="outline">
							<textarea matInput type="text" id="studiesSummaryNote" name="studiesSummaryNote"
									  formControlName="studiesSummaryNote">
							</textarea>
							<mat-error [translate]="'forms.REQUIRED'">
							</mat-error>
						</mat-form-field>
					</div>
					<div>
						<mat-label [translate]="'internaciones.epicrisis.observations.PHYSICAL_EXAMINATION'">
						</mat-label>
						<mat-form-field [floatLabel]="'never'" appearance="outline">
							<textarea matInput type="text" id="physicalExamNote" name="physicalExamNote"
									  formControlName="physicalExamNote">
							</textarea>
							<mat-error [translate]="'forms.REQUIRED'">
							</mat-error>
						</mat-form-field>
					</div>
					<div>
						<mat-label [translate]="'internaciones.epicrisis.observations.INDICATIONS_NOTE'"></mat-label>
						<mat-form-field [floatLabel]="'never'" appearance="outline">
							<textarea matInput type="text" id="indicationsNote" name="indicationsNote"
									  formControlName="indicationsNote">
							</textarea>
							<mat-error [translate]="'forms.REQUIRED'">
							</mat-error>
						</mat-form-field>
					</div>
					<div>
						<mat-label [translate]="'internaciones.epicrisis.observations.OTHERS'"></mat-label>
						<mat-form-field [floatLabel]="'never'" appearance="outline">
							<textarea matInput type="text" id="otherNote" name="otherNote" formControlName="otherNote">
							</textarea>
						</mat-form-field>
					</div>

				</mat-card-content>
			</mat-card>
		</section>

		<section id="buttons" class="form-buttons">
			<div class="buttons">
				<button mat-stroked-button type="button" color="primary" (click)="back()">
					<span class="uppercase"
						  [translate]="'buttons.BACK'">
					</span>
				</button>
				<button *ngIf="false" id="save-draft" mat-stroked-button type="submit" color="primary">
					<span class="uppercase" [translate]="'internaciones.epicrisis.buttons.SAVE_DRAFT'"></span>
				</button>
			</div>
			<div class="sign-buttons">
				<mat-checkbox formControlName="attachSignature">
					<span [translate]="'internaciones.epicrisis.buttons.ATTACH_SIGNATURE'"></span>
				</mat-checkbox>
				<mat-error *ngIf="!form.controls.attachSignature.value && this.formSubmitted">
					Debe adjuntar la firma
				</mat-error>
				<button id="sign-confirm" mat-raised-button type="submit" color="primary">
					<span class="uppercase" [translate]="'internaciones.epicrisis.buttons.SIGN_CONFIRM'"></span>
				</button>
			</div>
		</section>
	</form>
</div>
