<app-content width="full">

	<section id="header" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-between center">
		<div>
			<h2 id="title" class="page-title" [translate]="'turnos.home.TITLE'"></h2>
		</div>

		<div class="actions" fxLayout="row" fxLayoutGap="15px" fxLayout.xs="column" fxLayoutAlign="end none" >
			<form fxFlex.gt-xs="55%" [formGroup]="form" (ngSubmit)="search()">
				<mat-form-field appearance="outline" class="aligned-form-field">
					<input type="text"
						   placeholder="{{ 'turnos.home.actions.SEARCH' | translate }}"
						   aria-label="Number"
						   formControlName="profesional"
						   matInput
						   [matAutocomplete]="auto">
					<mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
						<mat-option *ngFor="let profesional of profesionalesFiltered"
									[value]="getFullNameLicence(profesional)"
									(onSelectionChange)="selectProfesional($event, profesional)">
							<span class="mat-body">{{getFullName(profesional)}}</span>
							<span class="mat-body-strong"> - {{profesional.licenceNumber}}</span>
						</mat-option>
					</mat-autocomplete>
					<button mat-icon-button matSuffix>
						<mat-icon>search</mat-icon>
					</button>
				</mat-form-field>
			</form>
			<button mat-flat-button color="primary" id="goToNewAgendaButton" *hasRole="['ADMINISTRADOR_AGENDA']" (click)="goToNewAgenda()" fxFlexFill.xs>
				<span class="uppercase" [translate]="'turnos.home.actions.NEW_AGENDA'"></span>
			</button>
		</div>
	</section>

	<section id="empty_calendar_home" *ngIf="!route.firstChild">
		<ng-template #weekViewHourSegmentTemplate let-segment="segment" let-locale="locale"
					 let-segmentHeight="segmentHeight" let-isTimeLabel="isTimeLabel">
			<div #segmentElement class="cal-hour-segment" [style.height.px]="segmentHeight"
				 [class.cal-hour-start]="segment.isStart" [class.cal-after-hour-start]="!segment.isStart"
				 [ngClass]="segment.cssClass">
				<div class="cal-time" *ngIf="isTimeLabel">
					{{ segment.date | calendarDate:'weekViewHour':locale }}
				</div>
			</div>
		</ng-template>

		<div fxLayout="row" fxLayoutAlign="space-between center">
			<div fxLayout="row">
				<button mat-raised-button
						color="primary"
						mwlCalendarPreviousView
						[view]="'week'"
						[(viewDate)]="viewDate"
				>
					Anterior
				</button>
				<button mat-stroked-button
						color="primary"
						mwlCalendarToday
						[(viewDate)]="viewDate"
				>
					Hoy
				</button>
				<button mat-raised-button
						color="primary"
						mwlCalendarNextView
						[view]="'week'"
						[(viewDate)]="viewDate"
				>
					Pr√≥ximo
				</button>
			</div>

			<div>
				<h2>{{ viewDate | calendarDate:('weekViewTitle'): undefined : 1 }}</h2>
			</div>
		</div>
		<mwl-calendar-week-view [viewDate]="viewDate"
								[hourSegmentTemplate]="weekViewHourSegmentTemplate"
								[dayStartHour]="8" [dayEndHour]="18"
								[hourSegments]="1"
		>
		</mwl-calendar-week-view>
	</section>

	<router-outlet></router-outlet>

</app-content>
