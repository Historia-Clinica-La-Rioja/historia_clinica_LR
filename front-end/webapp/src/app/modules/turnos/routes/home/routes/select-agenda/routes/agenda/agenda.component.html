<section id="calendar">
	<ng-template #weekViewHourSegmentTemplate let-segment="segment" let-locale="locale"
				 let-segmentHeight="segmentHeight" let-isTimeLabel="isTimeLabel">
		<div #segmentElement class="cal-hour-segment" [style.height.px]="segmentHeight"
		     [class.cal-hour-start]="segment.isStart" [class.cal-after-hour-start]="!segment.isStart"
		     [ngClass]="segment.cssClass">
			<div class="cal-time" *ngIf="isTimeLabel">
				{{ segment.date | calendarDate:'weekViewHour':locale }}
			</div>
		</div>
	</ng-template>

	<ng-template #calendar>
		<div fxLayout="row" fxLayoutAlign="space-between center">
			<div fxLayout="row">
				<button mat-raised-button
						color="primary"
						mwlCalendarPreviousView
						[view]="'week'"
						[(viewDate)]="viewDate"
				>
					Anterior
				</button>
				<button mat-stroked-button
						color="primary"
						mwlCalendarToday
						[(viewDate)]="viewDate"
				>
					Hoy
				</button>
				<button mat-raised-button
						color="primary"
						mwlCalendarNextView
						[view]="'week'"
						[(viewDate)]="viewDate"
				>
					Pr√≥ximo
				</button>
			</div>

			<div>
				<h2>{{ viewDate | calendarDate:('weekViewTitle'): undefined : newAgendaService.getWeekStartsOn() }}</h2>
			</div>
		</div>
		<mwl-calendar-week-view [viewDate]="viewDate"
								[events]="newAgendaService.getEvents()"
								[dayStartHour]="dayStartHour" [dayEndHour]="dayEndHour"
								[hourSegmentTemplate]="weekViewHourSegmentTemplate"
								[hourSegments]="newAgendaService.getMinutesInHour() / newAgendaService.getAppointmentDuration()"
								[weekStartsOn]="newAgendaService.getWeekStartsOn()"
								(beforeViewRender)="loadCalendar($event)" (hourSegmentClicked)="onClickedSegment($event)"
								(eventClicked)="viewAppointment($event)"
		>
		</mwl-calendar-week-view>
	</ng-template>

	<div class="spinner" *ngIf="loading else calendar">
		<mat-spinner color="primary"></mat-spinner>
	</div>

</section>
